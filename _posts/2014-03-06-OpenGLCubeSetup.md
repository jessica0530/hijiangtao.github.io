---
date: 2014-03-06 18:00:00
layout: post
title: OpenGL学习笔记5：创建3D物体
thread: 63
categories: 教程
tags: OpenGL
---

前言：在老师的推荐下准备系统学习下Nehe关于OpenGL的教程，在打开chm的第一眼就被作者的开源奉献精神所深深打动，这种思想与我不谋而合。

以下内容为我学习了教程之后自己的操作与总结，由于硬件与软件环境的差异，我的笔记内容在代码和描述上与原文可能存在一定出路。

----

本部分笔记记录的是告诉大家如何建立一个3D模型，当然还让他跟着轴旋转。

操作下来感觉自己的空间想象力需要锻炼，另一方面就是物体如果要旋转，一定要让对象的中心坐标总是(0.0f,0,0f,0,0f)。

函数最开始的初始化步骤：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);// 清除屏幕和深度缓存
glLoadIdentity();								// 重置当前的模型观察矩阵
glTranslatef(-1.5f,0.0f,-6.0f);					// 左移 1.5 单位，并移入屏幕 6.0
```

作者提示所有的面－三角形都是逆时针次序绘制的，至于具体原因在以后的课程中他会提及。因为所有的三角形共享顶点，所以将此点设置为红色，而底下两个顶点设置为互斥的，前侧面的左下顶点是绿色的，右下顶点是蓝色的。

以下分别画金字塔的前侧面、右侧面，后侧面，左侧面：

```
glRotatef(rtri,0.0f,1.0f,0.0f);					// 绕Y轴旋转三角形

glBegin(GL_TRIANGLES);							// 绘制三角形
	glColor3f(1.0f,0.0f,0.0f);			// 红色
	glVertex3f( 0.0f, 1.0f, 0.0f);		// 三角形的上顶点 (前侧面)
	glColor3f(0.0f,1.0f,0.0f);			// 绿色
	glVertex3f(-1.0f,-1.0f, 1.0f);		// 三角形的左下顶点 (前侧面)
	glColor3f(0.0f,0.0f,1.0f);			// 蓝色
	glVertex3f( 1.0f,-1.0f, 1.0f);		// 三角形的右下顶点 (前侧面)

	glColor3f(1.0f,0.0f,0.0f);			// 红色
	glVertex3f( 0.0f, 1.0f, 0.0f);		// 三角形的上顶点 (右侧面)
	glColor3f(0.0f,0.0f,1.0f);			// 蓝色
	glVertex3f( 1.0f,-1.0f, 1.0f);		// 三角形的左下顶点 (右侧面)
	glColor3f(0.0f,1.0f,0.0f);			// 绿色
	glVertex3f( 1.0f,-1.0f, -1.0f);		// 三角形的右下顶点 (右侧面)

	glColor3f(1.0f,0.0f,0.0f);			// 红色
	glVertex3f( 0.0f, 1.0f, 0.0f);		// 三角形的上顶点 (后侧面)
	glColor3f(0.0f,1.0f,0.0f);			// 绿色
	glVertex3f( 1.0f,-1.0f, -1.0f);		// 三角形的左下顶点 (后侧面)
	glColor3f(0.0f,0.0f,1.0f);			// 蓝色
	glVertex3f(-1.0f,-1.0f, -1.0f);		// 三角形的右下顶点 (后侧面)

	glColor3f(1.0f,0.0f,0.0f);			// 红色
	glVertex3f( 0.0f, 1.0f, 0.0f);		// 三角形的上顶点 (左侧面)
	glColor3f(0.0f,0.0f,1.0f);			// 蓝色
	glVertex3f(-1.0f,-1.0f,-1.0f);		// 三角形的左下顶点 (左侧面)
	glColor3f(0.0f,1.0f,0.0f);			// 绿色
	glVertex3f(-1.0f,-1.0f, 1.0f);		// 三角形的右下顶点 (左侧面)
glEnd();
```

接下来画立方体。他由六个四边形组成。所有的四边形都以逆时针次序绘制，就是说先画右上角，然后左上角、左下角、最后右下角。

```
glLoadIdentity();								// 重置模型观察矩阵
glTranslatef(1.5f,0.0f,-7.0f);					// 右移1.5单位,并移入屏幕 6.0
glRotatef(rquad,1.0f,0.0f,0.0f);				// 绕X轴旋转四边形

glBegin(GL_QUADS);								// 绘制正方形
	glColor3f(0.0f,1.0f,0.0f);			// 颜色改为蓝色
	glVertex3f( 1.0f, 1.0f,-1.0f);			// 四边形的右上顶点 (顶面)
	glVertex3f(-1.0f, 1.0f,-1.0f);			// 四边形的左上顶点 (顶面)
	glVertex3f(-1.0f, 1.0f, 1.0f);			// 四边形的左下顶点 (顶面)
	glVertex3f( 1.0f, 1.0f, 1.0f);			// 四边形的右下顶点 (顶面)

	glColor3f(1.0f,0.5f,0.0f);			// 颜色改成橙色
	glVertex3f( 1.0f,-1.0f, 1.0f);			// 四边形的右上顶点(底面)
	glVertex3f(-1.0f,-1.0f, 1.0f);			// 四边形的左上顶点(底面)
	glVertex3f(-1.0f,-1.0f,-1.0f);			// 四边形的左下顶点(底面)
	glVertex3f( 1.0f,-1.0f,-1.0f);			// 四边形的右下顶点(底面)

	glColor3f(1.0f,0.0f,0.0f);			// 颜色改成红色
	glVertex3f( 1.0f, 1.0f, 1.0f);			// 四边形的右上顶点(前面)
	glVertex3f(-1.0f, 1.0f, 1.0f);			// 四边形的左上顶点(前面)
	glVertex3f(-1.0f,-1.0f, 1.0f);			// 四边形的左下顶点(前面)
	glVertex3f( 1.0f,-1.0f, 1.0f);			// 四边形的右下顶点(前面)

	glColor3f(1.0f,1.0f,0.0f);			// 颜色改成黄色
	glVertex3f( 1.0f,-1.0f,-1.0f);			// 四边形的右上顶点(后面)
	glVertex3f(-1.0f,-1.0f,-1.0f);			// 四边形的左上顶点(后面)
	glVertex3f(-1.0f, 1.0f,-1.0f);			// 四边形的左下顶点(后面)
	glVertex3f( 1.0f, 1.0f,-1.0f);			// 四边形的右下顶点(后面)

	glColor3f(0.0f,0.0f,1.0f);			// 颜色改成蓝色
	glVertex3f(-1.0f, 1.0f, 1.0f);			// 四边形的右上顶点(左面)
	glVertex3f(-1.0f, 1.0f,-1.0f);			// 四边形的左上顶点(左面)
	glVertex3f(-1.0f,-1.0f,-1.0f);			// 四边形的左下顶点(左面)
	glVertex3f(-1.0f,-1.0f, 1.0f);			// 四边形的右下顶点(左面)

	glColor3f(1.0f,0.0f,1.0f);			// 颜色改成紫罗兰色
	glVertex3f( 1.0f, 1.0f,-1.0f);			// 四边形的右上顶点(右面)
	glVertex3f( 1.0f, 1.0f, 1.0f);			// 四边形的左上顶点(右面)
	glVertex3f( 1.0f,-1.0f, 1.0f);			// 四边形的左下顶点(右面)
	glVertex3f( 1.0f,-1.0f,-1.0f);			// 四边形的右下顶点(右面)
glEnd();						// 立方体绘制结束

rtri+=0.2f;						// 增加三角形的旋转变量
rquad-=0.15f;						// 减少四边形的旋转变量

return TRUE;					// 继续运行
```

本节笔记的完整代码下载地址：[OpenGL立体物体建立代码](/code/DataBlog_OpenGLCubeSetup.cpp)

----

好了，不写了歇息一会儿。要是换做以前直接照着做，估计现在也看了差不多有十几课了吧。但是现在边写边记录速度就慢了不少，就当给自己做笔记以供以后复习吧嘿嘿。

最后，如果你也对OpenGL感兴趣或者你在学习中有任何想法，欢迎在下方留言、与我交流！祝愿我们共同成长、一起进步！